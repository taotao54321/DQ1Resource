+++
title = "乱数"
date = 2022-03-25
updated = 2023-02-03
+++

乱数は 16bit で、線形合同法で生成されている。  
式は `771*x + 129 (mod 65536)` で、周期 32768 の系列が 2 種類ある。

ただし、乱数生成器以外で乱数を直接変更している箇所がある:

* 主人公の打撃の命中判定時、乱数の上位 2bit が 0 になる。

実際に確率判定などを行う際は乱数の上位バイトのみが使われる。  
また、一部の処理では生成式中の加算によるキャリーフラグも結果に影響する。

本作はサブフレーム入力による乱数調整が可能な場面がいくつかある。
